cd "/c/Users/MATIA/OneDrive/Desktop/internship/nova-ultra-with-supervisord/nova-ultra"

cat > backend/supervisord.conf <<'EOF'
[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
logfile_maxbytes=50MB
logfile_backups=3
loglevel=info

[program:uvicorn]
; use the Render PORT env var if present, fallback to 8000
command=/bin/sh -lc "python -m uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000} --log-level info"
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/uvicorn.log
stderr_logfile=/var/log/uvicorn_err.log
stopwaitsecs=10
priority=10

[program:celery]
command=/bin/sh -lc "python -m celery -A backend_addons.celery_app worker -l info --concurrency=1"
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/celery.log
stderr_logfile=/var/log/celery_err.log
stopwaitsecs=10
priority=20
EOF
